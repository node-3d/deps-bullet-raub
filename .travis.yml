if: commit_message =~ /^:hammer:/

language: cpp


matrix:
  include:
  - name: "Windows"
    os: windows
    script:
      # - find C:/ -name "math.h" -ignore_readdir_race 2>/dev/null
      - mingw32-make OS=Windows ARCH=64
      - mingw32-make OS=Windows ARCH=32
  - name: "Linux"
    os: linux
    dist: xenial
    sudo: false
  - name: "MacOS"
    os: osx
    compiler: clang++


script:
  - make


deploy:
  - provider: releases
    name: "Binaries"
    body: $TRAVIS_COMMIT_MESSAGE
    api_key: $GITHUB_TOKEN
    skip_cleanup: true
    overwrite: true
    draft: true
    file:
      - "bin-linux64/libbullet.a"
      - "bin-mac64/libbullet.a"
      - "bin-win32/bullet.lib"
      - "bin-win64/bullet.lib"
